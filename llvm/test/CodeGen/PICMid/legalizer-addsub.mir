# RUN: llc -mtriple=picmid -run-pass=legalizer -verify-machineinstrs -o - %s | FileCheck %s

---
name: add_imm
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: add_imm
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $w
    ; CHECK-NEXT: [[CONST:%[0-9]+]]:_(s8) = G_CONSTANT i8 42
    ; CHECK-NEXT: [[ADD:%[0-9]+]]:_(s8) = G_ADD %0, %1
    ; CHECK-NEXT: G_RETURN implicit [[ADD]]
    %0:_(s8) = COPY $w
    %1:_(s8) = G_CONSTANT i8 42
    %2:_(s8) = G_ADD %0, %1
    G_RETURN implicit %2