# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=picmid -run-pass=instruction-select -verify-machineinstrs -o - %s | FileCheck %s

---
name: add_imm
legalized: true
regBankSelected: true
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: add_imm
    ; CHECK: [[COPY:%[0-9]+]]:wc = COPY $w
    ; CHECK-NEXT: [[ADDLW:%[0-9]+]]:wc = G_ADDLW [[COPY]], 42
    ; CHECK-NEXT: G_RETURN implicit [[ADDLW]]
    %0:any(s8) = COPY $w
    %1:any(s8) = G_CONSTANT i8 42
    %2:any(s8) = G_ADD %0, %1
    G_RETURN implicit %2
---
name: add_f
legalized: true
regBankSelected: true
body: |
  bb.0.entry:
    %0:any(s8) = COPY $w
    %1:any(s8) = COPY $r0
    %2:any(s8) = G_ADD %0, %1
    G_RETURN implicit %2
---
name: add_w
legalized: true
regBankSelected: true
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: add_w
    ; CHECK: [[W:%[0-9]+]]:wc = COPY $w
    ; CHECK: [[R0:%[0-9]+]]:imag = COPY $r0
    ; COM: CHECK: [[G_ADD_1:%[0-9]+]]:wc = G_ADDWF_W [[W]], [[R0]] ; TODO: Get this to work!
    %0:any(s8) = COPY $w
    %1:any(s8) = COPY $r0
    %2:any(s8) = G_ADD %0, %1
    %3:any(s8) = G_ADD %2, %1
    G_RETURN implicit %3
---
name: sub_imm
legalized: true
regBankSelected: true
body: |
  bb.0.entry:
    %0:any(s8) = COPY $w
    %1:any(s8) = G_CONSTANT i8 42
    %2:any(s8) = G_SUB %1, %0
    G_RETURN implicit %2
---
name: sub_f
legalized: true
regBankSelected: true
body: |
  bb.0.entry:
    %0:any(s8) = COPY $w
    %1:any(s8) = COPY $r0
    %2:any(s8) = G_SUB %1, %0
    G_RETURN implicit %2
---
name: decf_f
legalized: true
regBankSelected: true
body: |
  bb.0.entry:
    %0:any(s8) = COPY $r0
    %1:any(s8) = G_CONSTANT i8 1
    %2:any(s8) = G_SUB %0, %1
    G_RETURN implicit %2
---
name: incf_f
legalized: true
regBankSelected: true
body: |
  bb.0.entry:
    %0:any(s8) = COPY $r0
    %1:any(s8) = G_CONSTANT i8 1
    %2:any(s8) = G_ADD %0, %1
    G_RETURN implicit %2
