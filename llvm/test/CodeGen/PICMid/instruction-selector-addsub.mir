# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=picmid -run-pass=instruction-select -verify-machineinstrs -o - %s | FileCheck %s

---
name: add
legalized: true
regBankSelected: true
body: |
  bb.0.entry:
---
name: add_imm
legalized: true
regBankSelected: true
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: add_imm
    ; CHECK: [[COPY:%[0-9]+]]:wc = COPY $w
    ; CHECK-NEXT: [[ADDImm:%[0-9]+]]:wc = ADDImm [[COPY]], 42
    ; CHECK-NEXT: RETURN_L implicit [[ADDImm]]
    %0:any(s8) = COPY $w
    %1:any(s8) = G_CONSTANT i8 42
    %2:any(s8) = G_ADD %0, %1
    RETURN_L implicit %2
---
name: add_f
legalized: true
regBankSelected: true
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: add_f
    ; CHECK: [[COPY:%[0-9]+]]:wc = COPY $w
    ; CHECK-NEXT: [[Imag:%[0-9]+]]:imag = COPY $r0
    ; CHECK-NEXT: [[ADDImagToF:%[0-9]+]]:imag = ADDImagToF [[COPY]], [[Imag]]
    ; CHECK-NEXT: RETURN_L implicit [[ADDImagToF]]
    %0:any(s8) = COPY $w
    %1:any(s8) = COPY $r0
    %2:any(s8) = G_ADD %0, %1
    RETURN_L implicit %2
---
name: add_w
legalized: true
regBankSelected: true
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: add_w
    ; TODO: Fix this
    %0:any(s8) = COPY $w
    %1:any(s8) = COPY $r0
    %2:any(s8) = G_ADD %0, %1
    %3:any(s8) = G_ADD %2, %1
    RETURN_L implicit %3
---
name: sub_imm
legalized: true
regBankSelected: true
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: sub_imm
    ; CHECK: [[COPY:%[0-9]+]]:wc = COPY $w
    ; CHECK-NEXT: [[SUBImm:%[0-9]+]]:wc = SUBImm [[COPY]], 42
    ; CHECK-NEXT: RETURN_L implicit [[SUBImm]]
    %0:any(s8) = COPY $w
    %1:any(s8) = G_CONSTANT i8 42
    %2:any(s8) = G_SUB %1, %0
    RETURN_L implicit %2
---
name: sub_f
legalized: true
regBankSelected: true
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: sub_f
    ; CHECK: [[COPY:%[0-9]+]]:wc = COPY $w
    ; CHECK-NEXT: [[R0:%[0-9]+]]:imag = COPY $r0
    ; CHECK-NEXT: [[SUBImagToF:%[0-9]+]]:imag = SUBImagToF [[COPY]], [[R0]]
    ; CHECK-NEXT: RETURN_L implicit [[SUBImagToF]]
    %0:any(s8) = COPY $w
    %1:any(s8) = COPY $r0
    %2:any(s8) = G_SUB %1, %0
    RETURN_L implicit %2
