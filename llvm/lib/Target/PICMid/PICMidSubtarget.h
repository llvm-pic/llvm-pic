#ifndef __PROJECTS_LLVM_LLVM_PIC_LLVM_LIB_TARGET_PICMID_PICMIDSUBTARGET_H_
#define __PROJECTS_LLVM_LLVM_PIC_LLVM_LIB_TARGET_PICMID_PICMIDSUBTARGET_H_

#include "llvm/CodeGen/GlobalISel/CallLowering.h"
#include "llvm/CodeGen/GlobalISel/InlineAsmLowering.h"
#include "llvm/CodeGen/GlobalISel/InstructionSelector.h"
#include "llvm/CodeGen/GlobalISel/Utils.h"
#include "llvm/CodeGen/Register.h"
#include "llvm/CodeGen/TargetSubtargetInfo.h"

#include "GISel/PICMidLegalizerInfo.h"
#include "GISel/PICMidRegisterBankInfo.h"
#include "PICMidFrameLowering.h"
#include "PICMidInstrInfo.h"
#include "PICMidRegisterInfo.h"
#include "PICMidTargetLowering.h"
#include "PICMidCallLowering.h"

#define GET_SUBTARGETINFO_HEADER
#include "PICMidGenSubtargetInfo.inc"

namespace llvm {

class PICMidTargetMachine;

// TODO: Complete
class PICMidSubtarget : public PICMidGenSubtargetInfo {
public:
  PICMidSubtarget(const Triple &TT, const std::string &CPU,
                  const std::string &FS, const PICMidTargetMachine &TM);

  const LegalizerInfo *getLegalizerInfo() const override { return &Legalizer; }

  const CallLowering *getCallLowering() const override {
    return &CallLoweringInfo;
  }

  const PICMidTargetLowering *getTargetLowering() const override {
    return &TargetLoweringInfo;
  }
  const PICMidFrameLowering *getFrameLowering() const override {
    return &FrameLowering;
  }
  InstructionSelector *getInstructionSelector() const override {
    return InstSelector.get();
  }
  const PICMidRegisterBankInfo *getRegBankInfo() const override {
    return &RegBankInfo;
  }
  const PICMidRegisterInfo *getRegisterInfo() const override {
    return &RegisterInfo;
  }
  const PICMidInstrInfo *getInstrInfo() const override { return &InstrInfo; }

  // Autogenerated by TableGen
  void ParseSubtargetFeatures(StringRef CPU, StringRef TuneCPU, StringRef FS);

  bool hasMidInstrs() const { return HasMidInstrs; }

private:
  bool FeatureSetDummy = false;
  bool HasEnhancedMidInstrs = false;
  bool HasMidInstrs = false;
  bool StaticStack = false;

  PICMidRegisterBankInfo RegBankInfo;
  PICMidCallLowering CallLoweringInfo;
  PICMidRegisterInfo RegisterInfo;
  PICMidInstrInfo InstrInfo;
  PICMidLegalizerInfo Legalizer;
  PICMidTargetLowering TargetLoweringInfo;
  PICMidFrameLowering FrameLowering;
  std::unique_ptr<InstructionSelector> InstSelector;
};

} // namespace llvm

#endif // __PROJECTS_LLVM_LLVM_PIC_LLVM_LIB_TARGET_PICMID_PICMIDSUBTARGET_H_